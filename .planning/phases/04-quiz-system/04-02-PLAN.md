---
phase: 04-quiz-system
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/quiz/quiz-renderer.js
  - assets/styles/quiz.css
  - index.html
autonomous: true

must_haves:
  truths:
    - "Quiz displays one question at a time with progress indicator"
    - "Answer buttons are large (64px+ height) and touch-friendly"
    - "User can select an answer by clicking/tapping a button"
    - "All answer buttons become disabled after selection"
  artifacts:
    - path: "src/components/quiz/quiz-renderer.js"
      provides: "QuizRenderer class managing quiz state and rendering"
      exports: ["QuizRenderer"]
      min_lines: 80
    - path: "assets/styles/quiz.css"
      provides: "Quiz-specific styles with child-friendly sizing"
      min_lines: 100
  key_links:
    - from: "src/components/quiz/quiz-renderer.js"
      to: "src/data/quiz-loader.js"
      via: "receives loaded quiz data"
      pattern: "constructor.*quizData"
    - from: "index.html"
      to: "assets/styles/quiz.css"
      via: "stylesheet link"
      pattern: "quiz\\.css"
---

<objective>
Build the QuizRenderer component that displays quiz questions with child-friendly UI

Purpose: Create the core quiz display logic following the LessonRenderer pattern, with large touch targets and clear visual hierarchy for young children

Output: QuizRenderer class and quiz.css stylesheet
</objective>

<execution_context>
@C:\Users\Furby\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Furby\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-quiz-system/04-01-SUMMARY.md
@src/components/lesson/lesson-renderer.js (pattern to follow)
@assets/styles/lesson.css (styling patterns)
@.planning/phases/04-quiz-system/04-RESEARCH.md (CSS examples)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create QuizRenderer class following LessonRenderer pattern</name>
  <files>src/components/quiz/quiz-renderer.js</files>
  <action>
Create src/components/quiz/ directory and quiz-renderer.js:

```javascript
/**
 * Quiz Renderer
 *
 * Displays quiz questions one at a time with answer selection.
 * Follows LessonRenderer pattern for consistency.
 */

export class QuizRenderer {
    constructor(container, quizData, state) {
        this.container = container;
        this.quiz = quizData;
        this.state = state;
        this.currentQuestion = 0;
        this.score = 0;
        this.answered = false;  // Guard against multiple clicks
    }

    render() {
        // Render current question with progress bar
        // Use quiz-wrapper, quiz-progress, quiz-question, quiz-answers classes
    }

    renderQuestion() {
        const question = this.quiz.questions[this.currentQuestion];
        const progress = ((this.currentQuestion + 1) / this.quiz.questions.length) * 100;

        // Return HTML with:
        // - quiz-progress-bar showing progress %
        // - quiz-question-number (Frage X von 5)
        // - quiz-question-text (the question)
        // - quiz-answers container with 4 quiz-answer-btn buttons
    }

    setupEventListeners() {
        // Event delegation on quiz-answers container
        // On button click: if (!this.answered) handleAnswer(answerId)
    }

    handleAnswer(answerId) {
        if (this.answered) return;  // Prevent multiple clicks
        this.answered = true;

        // Find selected answer and check if correct
        // Update score if correct
        // Apply CSS classes (handled in Plan 03)
        // Disable all buttons
        // Emit custom event for Kiki integration
    }

    nextQuestion() {
        this.currentQuestion++;
        this.answered = false;

        if (this.currentQuestion >= this.quiz.questions.length) {
            this.showResults();
        } else {
            this.render();
        }
    }

    showResults() {
        // Placeholder for results screen (implemented in Plan 03)
        // Show score: X von 5 richtig
    }

    getProgress() {
        return {
            current: this.currentQuestion + 1,
            total: this.quiz.questions.length,
            score: this.score
        };
    }

    destroy() {
        // Cleanup event listeners if needed
    }
}
```

Key requirements:
- answered flag MUST be checked first in handleAnswer to prevent double-clicks
- Use data-id attribute on buttons to identify answers
- Emit 'quiz-answer' CustomEvent with {correct, score} detail for Kiki integration
- Progress bar uses same styling pattern as lesson progress
  </action>
  <verify>File exists with QuizRenderer class export, render(), handleAnswer(), nextQuestion() methods</verify>
  <done>QuizRenderer class renders questions, handles answer selection with double-click protection</done>
</task>

<task type="auto">
  <name>Task 2: Create quiz.css with child-friendly styling</name>
  <files>assets/styles/quiz.css</files>
  <action>
Create quiz.css following lesson.css patterns and research recommendations:

```css
/* ========================================
   QUIZ STYLES - Child-Friendly Interactive
   ======================================== */

/* Use same font sizing as lessons */
.quiz-wrapper {
    --quiz-font-size-base: 22px;
    --quiz-font-size-question: 26px;
    min-height: calc(100vh - 80px);
    display: flex;
    flex-direction: column;
    max-width: 700px;
    margin: 0 auto;
    padding: var(--space-md);
    padding-bottom: 100px;
}

/* Progress bar - same as lesson */
.quiz-progress { /* styles */ }
.quiz-progress-bar { height: 8px; /* same as lesson */ }
.quiz-progress-fill { /* gradient animation */ }

/* Question display */
.quiz-question-number {
    text-align: center;
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
    margin-bottom: var(--space-sm);
}

.quiz-question-text {
    font-size: var(--quiz-font-size-question);
    text-align: center;
    margin-bottom: var(--space-xl);
    line-height: 1.4;
}

/* Answer buttons - LARGE touch targets (64px+) */
.quiz-answers {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.quiz-answer-btn {
    display: block;
    width: 100%;
    min-height: 64px;  /* Child-friendly touch target */
    padding: var(--space-md) var(--space-lg);

    font-size: var(--quiz-font-size-base);
    font-weight: var(--font-weight-medium);
    text-align: left;

    background-color: white;
    border: 3px solid var(--color-border);
    border-radius: var(--radius-lg);

    cursor: pointer;
    transition: all var(--transition-fast);
}

.quiz-answer-btn:hover:not(:disabled) {
    border-color: var(--color-secondary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.quiz-answer-btn:disabled {
    cursor: not-allowed;
    opacity: 0.7;
}

/* Responsive adjustments */
@media (max-width: 599px) {
    .quiz-wrapper {
        --quiz-font-size-base: 18px;
        --quiz-font-size-question: 22px;
    }
    .quiz-answer-btn {
        min-height: 56px;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .quiz-answer-btn { transition: none; }
    .quiz-answer-btn:hover { transform: none; }
}
```

Include:
- Progress bar matching lesson.css exactly
- Large 64px+ answer buttons
- Hover states that don't require precise targeting
- Mobile responsive sizing
- Reduced motion support
- Space for Kiki at bottom-left (margin consideration)
  </action>
  <verify>File exists with .quiz-wrapper, .quiz-answer-btn (min-height: 64px), responsive styles</verify>
  <done>quiz.css provides child-friendly large touch targets and consistent design</done>
</task>

<task type="auto">
  <name>Task 3: Add quiz.css to index.html</name>
  <files>index.html</files>
  <action>
Add quiz.css stylesheet link to index.html:

1. Find the existing CSS links section (after lesson.css)
2. Add: `<link rel="stylesheet" href="assets/styles/quiz.css">`
3. Place it after lesson.css, before kiki.css (or at logical position in CSS load order)

CSS load order should be:
1. main.css (base design system)
2. layout.css (if exists)
3. components.css
4. lesson.css
5. quiz.css (NEW)
6. kiki.css
  </action>
  <verify>grep "quiz.css" index.html returns the link tag</verify>
  <done>quiz.css is linked in index.html and loads with the app</done>
</task>

</tasks>

<verification>
- [ ] src/components/quiz/quiz-renderer.js exists with QuizRenderer class
- [ ] QuizRenderer has render(), handleAnswer(), nextQuestion(), showResults() methods
- [ ] answered flag prevents multiple clicks on same question
- [ ] assets/styles/quiz.css exists with child-friendly button sizing
- [ ] Answer buttons are minimum 64px height
- [ ] quiz.css linked in index.html
- [ ] Styles use CSS variables from main.css design system
</verification>

<success_criteria>
1. QuizRenderer can render a question with 4 answer buttons
2. Clicking an answer disables all buttons (no double-click)
3. Answer buttons are large enough for young children (64px+)
4. Progress bar shows current position (Frage X von 5)
5. Styling consistent with lesson.css patterns
</success_criteria>

<output>
After completion, create `.planning/phases/04-quiz-system/04-02-SUMMARY.md`
</output>
